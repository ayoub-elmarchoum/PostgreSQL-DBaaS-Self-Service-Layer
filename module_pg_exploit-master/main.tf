resource "dbaas-postgres-exploit_pg_exploit" "postgres-exploit" {
  metadata {
    name       = var.name
    type       = "database-postgres-exploit"
    affinity   = "all"
    timeout    = 450
    retry      = true
    wait_retry = 25
  }

  tenant = var.tenant
  action = var.action

  dynamic "target_list" {
    for_each = var.target_list
    content {
      dbname          = target_list.value.dbname
      schema          = target_list.value.schema
      table           = target_list.value.table
      no_kill_backend = target_list.value.no_kill_backend
      timeout         = target_list.value.timeout

      token_admin = target_list.value.token_admin
    }
  }
}

